@args int val, int var
@extends("main")
<div>Note</div>
<ul>
    <li>int val is fixed across requests</li>
    <li>int val is changed upon each request</li>
</ul>
<table border="1">
    <thead>
        <th>code</th>
        <th>result</th>
    </thead>
    <tbody>
        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>fixed tag without cache</h3>
    fixed: @testTagCacheTag(val)
</p>
<p>
    <h3>variable tag without cache</h3>
    variable: @testTagCacheTag(var)
</p>
}
            </pre></td>
            <td>
                <p>
                <h3>fixed tag without cache</h3>
                fixed: @testTagCacheTag(val)
                </p>
                <p>
                <h3>variable tag without cache</h3>
                variable: @testTagCacheTag(var)
                </p>
            </td>
        </tr>

        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>fixed tag cache without parameter</h3>
    fixed: @testTagCacheTag(val).cache()
</p>
<p>
    <h3>variable tag cache without parameter</h3>
    variable: @testTagCacheTag(var).cache()
</p>
}
            </pre></td>
            <td>
                <h3>tag cache without parameter</h3>
                <p>
                    fixed: @testTagCacheTag(val).cache()
                </p>
                <p>
                    variable: @testTagCacheTag(var).cache()
                </p>
            </td>
        </tr>

        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>fixed tag cache for "2s"</h3>
    fixed: @testTagCacheTag2(val).cache("2s")
</p>
<p>
    <h3>variable tag cache for "2s"</h3>
    variable: @testTagCacheTag2(var).cache("2s")
</p>
}
            </pre></td>
            <td>
                <p>
                <h3>fixed tag cache for "2s"</h3>
                fixed: @testTagCacheTag2(val).cache("2s")
                </p>
                <p>
                <h3>variable tag cache for "2s"</h3>
                variable: @testTagCacheTag2(var).cache("2s")
                </p>
            </td>
        </tr>

        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>fixed tag with body no cache</h3>
    fixed: @testTagCacheTag2(val) {
    <b>random int: @(new Random().nextInt())</b>
    }
</p>
<p>
    <h3>variable tag with body no cache</h3>
    variable: @testTagCacheTag2(var) {
    <b>random int: @(new Random().nextInt())</b>
    }
</p>
}
            </pre></td>
            <td>
                <h3>tag with body no cache</h3>
                <p>
                    fixed: @testTagCacheTag2(val) {
                    <b>random int: @(new Random().nextInt())</b>
                    }
                </p>
                <p>
                    variable: @testTagCacheTag2(var) {
                    <b>random int: @(new Random().nextInt())</b>
                    }
                </p>
            </td>
        </tr>

        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>fixed tag with body cache no parameter</h3>
    fixed: @testTagCacheTag2(val).cache() {
    <b>[@@testTagCacheTag2(val).cache()]random int: @(new Random().nextInt())</b>
    }
</p>
<p>
    <h3>variable tag with body cache no parameter</h3>
    variable: @testTagCacheTag2(var).cache() {
    <b>[@@testTagCacheTag2(var).cache()]random int: @(new Random().nextInt())</b>
    }
</p>
}
            </pre></td>
            <td>
                <p>
                <h3>fixed tag with body cache no parameter</h3>
                fixed: @testTagCacheTag2(val).cache() {
                <b>[@@testTagCacheTag2(val).cache()]random int: @(new Random().nextInt())</b>
                }
                </p>
                <p>
                <h3>variable tag with body cache no parameter</h3>
                variable: @testTagCacheTag2(var).cache() {
                <b>[@@testTagCacheTag2(var).cache()]random int: @(new Random().nextInt())</b>
                }
                </p>
            </td>
        </tr>

        <tr>
            <td><pre>
@verbatim(){
<p>
    <h3>tag with body cache for "3s"</h3>
    fixed: @testTagCacheTag(val).cache("3s") {
    <p>[@@testTagCacheTag(val).cache("3s")]</p>
    <p>random int: @(new Random().nextInt())</p>
    }
</p>
<p>
    <h3>fixed tag with body cache for 3 seconds</h3>
    fixed: @testTagCacheTag2(val).cache(3) {
    <p>[@@testTagCacheTag2(val).cache(3)]</p>
    <p>random int: @(new Random().nextInt())</p>
    }
</p>
<p>
    <h3>fixed tag with body cache for "3s" using variable as additional cache parameter</h3>
    fixed: @testTagCacheTag2(val).cache(3, System.currentTimeMillis()) {
    <p>[@@testTagCacheTag2(val).cache(3, System.currentTimeMillis())]</p>
    <p>random int: @(new Random().nextInt())</p>
    }
</p>
<p>
    <h3>variable tag with body cache for "3s"</h3>
    variable: @testTagCacheTag2(var).cache("3s") {
    <p>[@@testTagCacheTag2(var).cache("3s")]</p>
    <p>random int: @(new Random().nextInt())</p>
    }
</p>
}
            </pre></td>
            <td>
                <p>
                <h3>tag with body cache for "3s"</h3>
                fixed: @testTagCacheTag(val).cache("3s") {
                <p>[@@testTagCacheTag(val).cache("3s")]</p>
                <p>random int: @(new Random().nextInt())</p>
                }
                </p>
                <p>
                <h3>fixed tag with body cache for 3 seconds</h3>
                fixed: @testTagCacheTag2(val).cache(3) {
                <p>[@@testTagCacheTag2(val).cache(3)]</p>
                <p>random int: @(new Random().nextInt())</p>
                }
                </p>
                <p>
                <h3>fixed tag with body cache for "3s" using variable as additional cache parameter</h3>
                fixed: @testTagCacheTag2(val).cache(3, System.currentTimeMillis()) {
                <p>[@@testTagCacheTag2(val).cache(3, System.currentTimeMillis())]</p>
                <p>random int: @(new Random().nextInt())</p>
                }
                </p>
                <p>
                <h3>variable tag with body cache for "3s"</h3>
                variable: @testTagCacheTag2(var).cache("3s") {
                <p>[@@testTagCacheTag2(var).cache("3s")]</p>
                <p>random int: @(new Random().nextInt())</p>
                }
                </p>
            </td>
        </tr>
    </tbody>
</table>


@include(tmpl_src)
